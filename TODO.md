# TODO.md — Project Tasks

형식 제안:
- 상태: `[ ]` 미완료 / `[x]` 완료
- 우선순위: (P0 / P1 / P2)
- 가능하면 한 줄에 “무엇을, 왜”까지 간단히.

---

## 진행 중/우선 작업

- [ ] (P1) Glossary auto-variant 기능 구현(감지된 Term에 variants를 자동 추가해 관리 편의 개선).
- [ ] (P2) 번역 결과 일부를 Term variants로 바로 추가하는 오버레이 액션 구현.
- [ ] (P2) 번역 엔진들이 전체 문서에 나타나는 GlossaryEntry 배열, 세그먼트 별 SegmentPiece 배열을 엔진마다 새로 요청하고 생성하지 않고 공통으로 사용하도록 수정. 

## 완료된 작업

- [x] (P2) 오버레이 패널 기능 확장(정규화 전/후 원문 노출, 감지된 용어/마스킹·정규화 결과를 원문/번역문에 색상 표시).
- [x] (P1) 새로고침 시 캐시 삭제 및 번역 상태 초기화 기능 구현(CacheStore에 clearAll/clearBySegmentIDs 메서드 추가, refreshAndReload에서 페이지별 캐시 삭제로 항상 최신 번역 보장).
- [x] (P2) 순서 기반 용어 정규화/언마스킹 개선(SegmentPieces 원문 순서를 활용한 3단계 fallback으로 동음이의어·동명이인 정규화 정확도를 70-90% 개선).
- [x] (P1) 세그먼트에서 용어집 용어 감지 로직 리팩토링(텍스트와 용어 집합으로 변환 후 마스킹/정규화까지 range 정보를 보존해 후속 처리/오버레이 개선 용이).
