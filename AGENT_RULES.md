# AGENT_RULES.md — Multi-Agent Rules

이 문서는 **모든 에이전트(Claude, Codex, ChatGPT 등)가 따라야 할 규칙**을 정의합니다.  
규칙을 변경하거나 추가할 때는, 변경 이유를 간단히 남겨 주세요.

---

## 1. 공통 원칙

- 이 프로젝트는 여러 LLM 에이전트가 함께 사용하는 코드베이스입니다.
- 코드를 수정하기 전에 아래 문서를 이 순서로 확인합니다.
  1. `AGENT_RULES.md` (이 문서)
  2. `PROJECT_OVERVIEW.md`
  3. `TODO.md`
- 규칙을 임의로 무시하지 말고, 필요한 경우 **규칙 자체를 수정**하고 한 줄 정도 이유를 남깁니다.

---

## 2. 코드/구조 변경 시 체크리스트

에이전트가 아래 변경 중 **하나라도** 했다면, 반드시 관련 문서를 함께 업데이트해야 합니다.

### 2-1. 폴더/파일 구조 변경

예:
- 파일을 새 폴더로 이동
- 폴더 이름/모듈 이름 변경
- 새로운 Feature/Service 모듈 추가

해야 할 일:
- `PROJECT_OVERVIEW.md`의 **프로젝트 구조/폴더 설명 섹션**을 최신 상태로 수정합니다.

### 2-2. 핵심 타입/서비스 이름 또는 책임 변경

예:
- `DefaultTranslationRouter`의 역할을 크게 바꿈
- 새로운 번역 엔진 타입 추가
- `Glossary.Service`를 다른 이름/역할로 변경

해야 할 일:
- `PROJECT_OVERVIEW.md`의 **핵심 타입/모듈 목록**과 해당 설명을 수정합니다.

> ⚠️ **핵심 타입/모듈 목록은 오직 `PROJECT_OVERVIEW.md`에서만 관리합니다.**  
> 이 문서에는 목록을 복제하지 않고, “참조하라”는 지침만 둡니다.

### 2-3. 프로젝트 전역 규칙 변경

예:
- 번역 스트리밍 이벤트 순서를 바꾸거나 새로운 이벤트를 도입
- Glossary 적용 정책/마스킹 정책 변경
- 번역 엔진 라우팅 우선순위 변경

해야 할 일:
- 이 문서(`AGENT_RULES.md`)에 관련 규칙을 수정/추가하고,
- 변경 이유를 한 줄 정도 기록합니다.

### 2-4. 작업(TODO) 완료/추가/수정

예:
- 실제로 특정 기능 구현/리팩터링/버그 픽스를 마침
- 새로 해야 할 일이 생김

해야 할 일:
- `TODO.md`의 대응 항목 상태를 갱신하거나 새 항목을 추가합니다.

---

## 3. 빌드/테스트 규칙

- Xcode 빌드/테스트 명령은 **Xcode가 설치된 macOS 환경 + iOS 시뮬레이터가 준비된 경우에만** 실제로 실행합니다.
- 원격/제한된 환경(예: web IDE, read-only 환경, 빌드 도구 미설치 환경)에서는:
  - 빌드/테스트 명령을 실행하지 말고,
  - 단순히 “이런 명령으로 빌드/테스트할 수 있다”는 **참고 정보로만** 활용합니다.
- CI 환경이 구성되어 있다면, 가능하면 **CI에서 빌드/테스트를 위임**하고 로컬에서는 필요한 최소 범위만 실행합니다.

실제 명령 목록은 `PROJECT_OVERVIEW.md`의 **Build & Test** 섹션을 참고하세요.

---

## 4. 에이전트별 특이 규칙

### 4-1. Claude

- Claude CLI / Web Claude는:
  - `claude.md` → `AGENTS.md` → 나머지 문서 순서로 진입합니다.
  - 규칙/정책 변경 시 **반드시 이 문서(`AGENT_RULES.md`)를 수정**합니다.
- 코드 구조를 크게 바꾸는 PR/커밋을 제안하는 경우:
  - 변경된 구조를 반영하도록 `PROJECT_OVERVIEW.md`도 함께 수정 제안을 포함합니다.

### 4-2. Codex

- Codex는 리포지토리 루트의 `AGENTS.md`와 이 문서를 읽고 규칙을 따릅니다.
- 폴더/파일 이동·생성·삭제를 제안했다면, 반드시 `PROJECT_OVERVIEW.md`의 구조 설명도 갱신합니다.

### 4-3. ChatGPT

- ChatGPT는 사용자가 제공한 최신 버전의 이 문서를 신뢰하고,
  여기 적힌 규칙을 어기지 않도록 제안/수정 작업을 수행합니다.

---

## 5. 규칙 변경 로그 (요약)

- 2025-11-20: Multi-Agent 규칙 문서 초기 버전 작성
